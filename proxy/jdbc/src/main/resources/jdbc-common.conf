include "cloudstate-common"

cloudstate.proxy {
  value-entity {
    enabled = true
    persistence.store = "jdbc"
  }

  eventsourced-entity {
    journal-enabled = true
    read-journal = jdbc-read-journal
    projection-support {
      enabled = true
      class = "io.cloudstate.proxy.jdbc.SlickProjectionSupport"
    }
  }
}

akka {
  management.health-checks.readiness-checks {
    cloudstate-jdbc = "io.cloudstate.proxy.jdbc.SlickEnsureTablesExistReadyCheck"
  }

  persistence {
    journal.plugin = "jdbc-journal"
    snapshot-store.plugin = "jdbc-snapshot-store"
    read-journal.plugin = "jdbc-read-journal"
  }
}

akka-persistence-jdbc {
  shared-databases.slick.db {
    connectionTimeout = 5000
  }
}

jdbc-journal {
  use-shared-db = slick
}

jdbc-snapshot-store {
  use-shared-db = slick
}

jdbc-read-journal {
  use-shared-db = slick
}
